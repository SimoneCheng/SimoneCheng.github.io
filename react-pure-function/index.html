<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ã€Reactã€‘ä»€éº¼æ˜¯ Pure Functionï¼Ÿåœ¨ React ç•¶ä¸­çš„é‡è¦æ€§æ˜¯ä»€éº¼ï¼Ÿ Â· å¯«å­—ç·´ç¿’</title><meta name="description" content="ã€Reactã€‘ä»€éº¼æ˜¯ Pure Functionï¼Ÿåœ¨ React ç•¶ä¸­çš„é‡è¦æ€§æ˜¯ä»€éº¼ï¼Ÿ - Simone Cheng"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/dovefavicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://simonecheng.github.io/atom.xml" title="å¯«å­—ç·´ç¿’"><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="å¯«å­—ç·´ç¿’" type="application/atom+xml">
</head><body><div class="wrap"><header><a class="logo-link" href="/"><img src="/dovefavicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="/tags/" target="_self">TAGS</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives/" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="/about/" target="_self">ABOUT</a></li><li class="nav-list-item"><a class="nav-list-link" href="/atom.xml" target="_self">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ã€Reactã€‘ä»€éº¼æ˜¯ Pure Functionï¼Ÿåœ¨ React ç•¶ä¸­çš„é‡è¦æ€§æ˜¯ä»€éº¼ï¼Ÿ</h1><div class="post-info">Jan 19, 2022<a class="tag-title" href="/tags/React/">#React</a><a class="tag-title" href="/tags/funcitonal-programming/">#funcitonal programming</a></div><aside class="toc"><div class="toc-title"><div class="text">ç›®éŒ„</div><div class="chevron-down-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%90%B3-%E4%BB%80%E9%BA%BC%E6%98%AF-pure-function%EF%BC%9F"><span class="toc-text">ğŸ³ ä»€éº¼æ˜¯ pure functionï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%90%B3-%E6%A2%9D%E4%BB%B6%E4%B8%80%EF%BC%9A%E7%9B%B8%E5%90%8C%E7%9A%84-input%EF%BC%8C%E6%B0%B8%E9%81%A0%E9%83%BD%E8%BC%B8%E5%87%BA%E7%9B%B8%E5%90%8C%E7%9A%84-output"><span class="toc-text">ğŸ³ æ¢ä»¶ä¸€ï¼šç›¸åŒçš„ inputï¼Œæ°¸é éƒ½è¼¸å‡ºç›¸åŒçš„ output</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9D%8C-%E4%B8%8D%E7%AC%A6%E5%90%88%E6%A2%9D%E4%BB%B6%E4%B8%80%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-text">âŒ ä¸ç¬¦åˆæ¢ä»¶ä¸€çš„ä¾‹å­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%94%EF%B8%8F-%E7%AC%A6%E5%90%88%E6%A2%9D%E4%BB%B6%E4%B8%80%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-text">âœ”ï¸ ç¬¦åˆæ¢ä»¶ä¸€çš„ä¾‹å­</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%90%B3-%E6%A2%9D%E4%BB%B6%E4%BA%8C%EF%BC%9A%E6%B2%92%E6%9C%89%E7%94%A2%E7%94%9F-side-effect"><span class="toc-text">ğŸ³ æ¢ä»¶äºŒï¼šæ²’æœ‰ç”¢ç”Ÿ side effect</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A6%80-%E4%BB%80%E9%BA%BC%E6%98%AF-side-effect%EF%BC%9F"><span class="toc-text">ğŸ¦€ ä»€éº¼æ˜¯ side effectï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A6%80-side-effect-%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-text">ğŸ¦€ side effect æœ‰å“ªäº›ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%90%B3-%E7%82%BA%E4%BB%80%E9%BA%BC%E6%88%91%E5%80%91%E9%9C%80%E8%A6%81-pure-function%EF%BC%9F"><span class="toc-text">ğŸ³ ç‚ºä»€éº¼æˆ‘å€‘éœ€è¦ pure functionï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%90%B3-%E7%82%BA%E4%BB%80%E9%BA%BC-pure-function-%E5%9C%A8-React-%E8%A3%A1%E9%9D%A2%E6%98%AF%E9%87%8D%E8%A6%81%E7%9A%84%EF%BC%9F"><span class="toc-text">ğŸ³ ç‚ºä»€éº¼ pure function åœ¨ React è£¡é¢æ˜¯é‡è¦çš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%90%B3-%E5%8F%83%E8%80%83%E8%B3%87%E6%BA%90"><span class="toc-text">ğŸ³ åƒè€ƒè³‡æº</span></a></li></ol></div></aside><div class="post-content"><p>åœ¨ functional programming ç•¶ä¸­ï¼Œæœ‰ä¸€å€‹é‡è¦çš„æ¦‚å¿µç¨±ç‚º pure functionï¼Œè€Œé€™å€‹æ¦‚å¿µåœ¨ React çš„å®˜æ–¹æ–‡ä»¶ç•¶ä¸­è¢«æèµ·ï¼Œé‚£éº¼ pure function åœ¨ React ç•¶ä¸­åˆ°åº•æ‰®æ¼”äº†ä»€éº¼æ¨£çš„è§’è‰²å‘¢ï¼Ÿé€™æ˜¯æœ¬æ–‡è©¦åœ–ç†è§£ä¸¦å›ç­”çš„å•é¡Œã€‚</p>
<span id="more"></span>
<p>ç›®å‰çš„æ–‡ç« æ¶æ§‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»€éº¼æ˜¯ pure functionï¼Ÿ</li>
<li>ç‚ºä»€éº¼æˆ‘å€‘éœ€è¦ pure functionï¼Ÿ</li>
<li>ç‚ºä»€éº¼ pure function åœ¨ React è£¡é¢æ˜¯é‡è¦çš„ï¼Ÿ</li>
</ul>
<p>åœ¨é–±è®€æœ¬æ–‡ä¹‹å‰ï¼Œä½ å¯èƒ½è¦æœ‰çš„å…ˆå‚™çŸ¥è­˜ï¼š</p>
<ul>
<li>äº†è§£ React hooks å¦‚ä½•é‹ä½œ</li>
<li>äº†è§£ React functional components è£¡é¢çš„ life cycle</li>
<li>äº†è§£ä¸€é»é» Redux</li>
<li>æœ€é‡è¦çš„æ˜¯ï¼šäº†è§£ JavaScript</li>
</ul>
<h2 id="ğŸ³-ä»€éº¼æ˜¯-pure-functionï¼Ÿ">ğŸ³ ä»€éº¼æ˜¯ pure functionï¼Ÿ</h2>
<blockquote>
<p>A pure function is a function which:</p>
<ul>
<li>The function always returns the same result if the same arguments are passed in. It does not depend on any state, or data, change during a programâ€™s execution. It must only depend on its input arguments.</li>
<li>The function does not produce any observable side effects such as network requests, input and output devices, or data mutation.</li>
</ul>
</blockquote>
<p>ç°¡å–®ä¾†èªªï¼Œä¸€å€‹ function åªè¦ç¬¦åˆä»¥ä¸‹å…©å€‹æ¢ä»¶ï¼š</p>
<ol>
<li>ç›¸åŒçš„ inputï¼Œæ°¸é éƒ½è¼¸å‡ºç›¸åŒçš„ outputã€‚</li>
<li>æ²’æœ‰ç”¢ç”Ÿ side effectã€‚è·Ÿå…¶ä»–functionä¸æœƒäº’ç›¸å¹²æ“¾ï¼Œä¸æœƒä¿®æ”¹/å¼•ç”¨/å­˜å–æˆ–æ˜¯ä¾è³´åˆ°åˆ°å¤–éƒ¨è®Šæ•¸ï¼Œä½†æ˜¯ç•¶ä½œåƒæ•¸å‚³å…¥æ˜¯å¯ä»¥çš„ã€‚</li>
</ol>
<p>æˆ‘å€‘å°±å¯ä»¥æŠŠé€™å€‹ function ç¨±ç‚º pure functionã€‚ä½†è¦æ€éº¼æ¨£æ‰èƒ½ç¬¦åˆé€™å…©å€‹æ¢ä»¶é¤’ï¼Ÿæ¥ä¸‹ä¾†å¯ä»¥ä¾†ç´°çœ‹é€™å…©å€‹æ¢ä»¶çš„æ„æ¶µã€‚</p>
<h2 id="ğŸ³-æ¢ä»¶ä¸€ï¼šç›¸åŒçš„-inputï¼Œæ°¸é éƒ½è¼¸å‡ºç›¸åŒçš„-output">ğŸ³ æ¢ä»¶ä¸€ï¼šç›¸åŒçš„ inputï¼Œæ°¸é éƒ½è¼¸å‡ºç›¸åŒçš„ output</h2>
<h3 id="âŒ-ä¸ç¬¦åˆæ¢ä»¶ä¸€çš„ä¾‹å­">âŒ ä¸ç¬¦åˆæ¢ä»¶ä¸€çš„ä¾‹å­</h3>
<p>ä»¥ä¸‹å…©å€‹ function æ¯æ¬¡çš„ output éƒ½ä¸ä¸€æ¨£ï¼Œæ‰€ä»¥ä¸ç¬¦åˆæ¢ä»¶ä¸€ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">now</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br></pre></td></tr></table></figure>
<h3 id="âœ”ï¸-ç¬¦åˆæ¢ä»¶ä¸€çš„ä¾‹å­">âœ”ï¸ ç¬¦åˆæ¢ä»¶ä¸€çš„ä¾‹å­</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a, béƒ½æ˜¯æ•´æ•¸</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// =&gt; input æ˜¯ 1, 2ï¼Œæ°¸é éƒ½ return 3</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">3</span>, <span class="number">5</span>); <span class="comment">// =&gt; input æ˜¯ 3, 5ï¼Œæ°¸é éƒ½ return 8</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">4</span>, <span class="number">6</span>); <span class="comment">// =&gt; input æ˜¯ 4, 6ï¼Œæ°¸é éƒ½ return 10</span></span><br></pre></td></tr></table></figure>
<h2 id="ğŸ³-æ¢ä»¶äºŒï¼šæ²’æœ‰ç”¢ç”Ÿ-side-effect">ğŸ³ æ¢ä»¶äºŒï¼šæ²’æœ‰ç”¢ç”Ÿ side effect</h2>
<h3 id="ğŸ¦€-ä»€éº¼æ˜¯-side-effectï¼Ÿ">ğŸ¦€ ä»€éº¼æ˜¯ side effectï¼Ÿ</h3>
<blockquote>
<p>An observable side effect is any interaction with the outside world from within a function. That could be anything from changing a variable that exists outside the function, to calling another method from within a function.</p>
<p>Note: If a pure function calls a pure function this isnâ€™t a side effect and the calling function is still pure.</p>
</blockquote>
<p>ç°¡å–®ä¾†èªªï¼Œside effect æŒ‡çš„å°±æ˜¯åœ¨åŸ·è¡ŒæŸå€‹ function æ™‚ï¼Œè©² function çš„ä½œç”¨æœƒå½±éŸ¿åˆ°å¤–é¢ï¼ˆæ¯”å¦‚å…¨åŸŸç’°å¢ƒæˆ–æ˜¯å…¶ä»– function è£¡çš„æ±è¥¿ï¼‰ï¼Œé‚£éº¼ã€Œæœƒå½±éŸ¿åˆ°è©² function å¤–é¢ã€é€™å€‹è¡Œç‚ºï¼Œå°±å«åš side effectã€‚</p>
<p>é›–ç„¶ side effect è½èµ·ä¾†å¾ˆåƒæ˜¯è² é¢çš„åè©ï¼Œä½†ä¸è¡¨ç¤º side effect å°±æ˜¯ä¸å¥½çš„ï¼Œåœ¨ç¨‹å¼ç•¶ä¸­ï¼Œside effect å–®ç´”å°±åªæ˜¯æè¿°åœ¨å¯« function æ™‚æœ‰å¯èƒ½æœƒå‡ºç¾çš„æƒ…æ³æˆ–æ˜¯ç¾è±¡è€Œå·²ã€‚</p>
<h3 id="ğŸ¦€-side-effect-æœ‰å“ªäº›ï¼Ÿ">ğŸ¦€ side effect æœ‰å“ªäº›ï¼Ÿ</h3>
<p>ä»¥ä¸‹ä»‹ç´¹ä¸€äº›å¸¸è¦‹çš„ side effectï¼Œä½†ä¸é™æ–¼æ­¤ï¼š</p>
<ol>
<li>Making a HTTP request</li>
<li>Mutating data</li>
<li>Printing to a screen or console</li>
<li>DOM Query/Manipulation</li>
<li>Math.random()</li>
<li>Getting the current time</li>
</ol>
<p>æ¥ä¸‹ä¾†ç›´æ¥ä»¥ç¨‹å¼ç¢¼ä¾†èˆ‰ä¾‹æœ‰ side effect çš„ function é•·ä»€éº¼æ¨£å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">impureAssoc</span>(<span class="params">key, value, object</span>) &#123;</span><br><span class="line">  object[key] = value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;Bobo&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">impureAssoc</span>(<span class="string">&#x27;shoeSize&#x27;</span>, <span class="number">400</span>, person);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// &#123; name: &#x27;Bobo&#x27;, shoeSize: 400 &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// &#123; name: &#x27;Bobo&#x27;, shoeSize: 400 &#125;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°çš„ç¨‹å¼ç¢¼ç•¶ä¸­ï¼Œç•¶æŠŠ <code>person</code> å‚³å…¥ <code>impureAssoc</code> é€™å€‹ fucntion è£¡é¢ä¹‹å¾Œï¼Œ<code>person</code> å¾ <code>&#123; name: 'Bobo' &#125;</code> è®Šæˆ <code>&#123; name: 'Bobo', shoeSize: 400 &#125;</code>ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œé€é <code>impureAssoc</code> é€™å€‹ functionï¼Œæ”¹è®Šäº†å…¨åŸŸè®Šæ•¸ <code>person</code>ï¼Œé€™ä¹Ÿæ„å‘³è‘—é€™å€‹ function æœ‰ side effectã€‚</p>
<p>æˆ‘å€‘æŠŠç¨‹å¼ç¢¼ç¨å¾®æ”¹ä¸€ä¸‹ï¼Œåœ¨åŸæœ¬çš„ function ä¸­å…ˆå°‡å‚³å…¥çš„ object è¤‡è£½å‡ºä¸€ä»½ä¸€æ¨¡ä¸€æ¨£çš„ï¼Œç„¶å¾Œé‡å°è¤‡è£½å‡ºä¾†çš„é‚£ä»½é€²è¡Œä¿®æ”¹ï¼Œå°±å¯ä»¥æ¶ˆé™¤é€™å€‹ function çš„ side effectï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">pureAssoc</span> = (<span class="params">key, value, object</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> newObject = &#123; ...object &#125;;</span><br><span class="line">  newObject[key] = value;</span><br><span class="line">  <span class="keyword">return</span> newObject;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;Bobo&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">pureAssoc</span>(<span class="string">&#x27;shoeSize&#x27;</span>, <span class="number">400</span>, person);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// &#123; name: &#x27;Bobo&#x27; &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// &#123; name: &#x27;Bobo&#x27;, shoeSize: 400 &#125;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æ­¤ä¸€ä¾†ï¼Œæˆ‘å€‘åœ¨æ²’æœ‰æ”¹å‹•åˆ°åŸæœ¬çš„ <code>person</code> çš„æƒ…æ³ä¸‹ï¼Œå¾—åˆ°æˆ‘å€‘æƒ³è¦çš„ <code>result</code>ã€‚æ–¼æ˜¯é€™å€‹åŸæœ¬ä¸ pure çš„ functionï¼Œä¹Ÿè®Š pure äº†ã€‚</p>
<div class="warning">
<p>âš ï¸ <b>æ·ºæ‹·è² v.s.æ·±æ‹·è²</b><br>ä½ çš„è¤‡è£½çœŸçš„æ˜¯æˆåŠŸçš„è¤‡è£½å—ï¼Ÿæœ‰æ²’æœ‰å¯èƒ½ä½ å…¶å¯¦æ²’æœ‰è¤‡è£½åˆ°ï¼Œæ‰€ä»¥é‚„æ˜¯æœƒæ”¹å‹•åˆ°åŸæœ¬çš„ dataï¼Ÿ</p>
</div>
<h2 id="ğŸ³-ç‚ºä»€éº¼æˆ‘å€‘éœ€è¦-pure-functionï¼Ÿ">ğŸ³ ç‚ºä»€éº¼æˆ‘å€‘éœ€è¦ pure functionï¼Ÿ</h2>
<p>å¤§æ¦‚äº†è§£ pure function çš„å®šç¾©å’Œä»€éº¼æ˜¯ pure function ä¹‹å¾Œï¼Œå°±è¦ä¾†å•ï¼šæ‰€ä»¥ç‚ºä»€éº¼éœ€è¦ pure functionï¼Ÿå®ƒæ˜¯ç”¨ä¾†å¹¹å˜›çš„ï¼Ÿ</p>
<p><strong>1.immediately testable, maintain and refactor easier</strong></p>
<p>ã€Œç›¸åŒçš„ inputï¼Œæ°¸é éƒ½è¼¸å‡ºç›¸åŒçš„ outputã€‚ã€é€™å€‹ pure function çš„ç‰¹æ€§ä½¿å®ƒèƒ½å¤ éå¸¸å®¹æ˜“åœ°è¢«æ‹¿ä¾†æ¸¬è©¦ã€‚</p>
<p>ç•¶ä½ å¯«çš„ç¨‹å¼è¶Šä¾†è¶Šé¾å¤§ï¼Œç¨‹å¼ç¢¼çš„é–±è®€æ€§èˆ‡èªæ³•ç°¡æ½”ã€æ˜“æ–¼æ¸¬è©¦ã€ç¶­è­·èˆ‡é™¤éŒ¯ã€æ˜“æ–¼è¦æ¨¡åŒ–ç­‰ç­‰ï¼Œéƒ½æœƒè®Šæˆè¦è€ƒé‡çš„é‡é»ï¼Œé€™æ™‚ pure function çš„å¥½è™•å°±æœƒéå¸¸æ˜é¡¯â”€â”€å¥½è®€ã€å¥½ç¶­è­·ã€dataçš„æ”¹å‹•å¯ä»¥è¢«è¿½è¹¤ã€æ¯”è¼ƒä¸æœƒå‡ºç¾ä¸€äº›é æœŸä¹‹å¤–çš„éŒ¯èª¤ï¼ˆside effectï¼‰ã€‚</p>
<p><strong>2.æ˜¯ functional programming å¾ˆé‡è¦çš„ basic conceptã€‚</strong></p>
<h2 id="ğŸ³-ç‚ºä»€éº¼-pure-function-åœ¨-React-è£¡é¢æ˜¯é‡è¦çš„ï¼Ÿ">ğŸ³ ç‚ºä»€éº¼ pure function åœ¨ React è£¡é¢æ˜¯é‡è¦çš„ï¼Ÿ</h2>
<p>åœ¨ React çš„å®˜æ–¹æ–‡ä»¶ <a target="_blank" rel="noopener" href="https://reactjs.org/docs/components-and-props.html">Components and Props</a> ä¸­ï¼Œç‰¹åˆ¥æåˆ°äº†ä¸€å¥è©±ï¼š</p>
<blockquote>
<p>All React components must act like <strong>pure functions</strong> with respect to their props.</p>
</blockquote>
<p><img src="https://i.imgur.com/FtP80vu.png" alt=""></p>
<p>pure function åœ¨ React ç•¶ä¸­ä¹‹æ‰€ä»¥é‡è¦ï¼Œæ˜¯å› ç‚ºï¼š</p>
<ol>
<li>functional componentï¼šé—œä¿‚åˆ° <code>useState()</code> æœƒä¸æœƒå°‡å‚³å…¥çš„ state è¦–ç‚ºä¸åŒçš„è³‡æ–™ï¼Œç„¶å¾Œé‡æ–° renderã€‚ç¯„ä¾‹ï¼š<a target="_blank" rel="noopener" href="https://codesandbox.io/s/case-1-wd1dh?file=/src/App.js">https://codesandbox.io/s/case-1-wd1dh?file=/src/App.js</a></li>
<li>ç¢ºä¿ä¸ç®¡åœ¨ä»»ä½•æƒ…æ³ä¹‹ä¸‹ï¼Œå‚³å…¥ç›¸åŒçš„ inputï¼Œéƒ½æœƒæ¸²æŸ“å‡ºç›¸åŒçš„ç•«é¢çµ¦ä½¿ç”¨è€…çœ‹ï¼ˆoutputï¼‰ã€‚</li>
<li>reduxï¼šå’Œ <code>useState()</code> ä¹Ÿæ˜¯åŒæ¨£çš„é“ç†ï¼Œæ‰€ä»¥ reducers ä¹Ÿè¦å®šå¿…é ˆæ˜¯ pure functionã€‚</li>
<li>é‚„æ²’æœ‰ hooks æ™‚ï¼Œåœ¨ functional component è£¡é¢ï¼Œè®“ props åªèƒ½æ˜¯å”¯è®€çš„ï¼Œä½¿è³‡æ–™åœ¨ä¿®æ”¹çš„æ™‚å€™æ¯”è¼ƒå¥½è¿½è¹¤å’Œç®¡ç†ã€‚</li>
<li>A React component should be pure, this means the result of its render method should depend solely on the props and the state, and for the same properties and state render should give the same result. If render is not pure, it means it can return different results for the same input, so React cannot tell which parts of the DOM need to be updated based on the changes to the component. This is critical as the performance of React depends of this.</li>
</ol>
<h2 id="ğŸ³-åƒè€ƒè³‡æº">ğŸ³ åƒè€ƒè³‡æº</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.freecodecamp.org/news/what-is-a-pure-function-in-javascript-acb887375dfe/">What Is a Pure Function in JavaScript? - FreeCodeCamp</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@jamesjefferyuk/javascript-what-are-pure-functions-4d4d5392d49c">JavaScript: What Are Pure Functions And Why Use Them? - Medium</a></li>
<li><a target="_blank" rel="noopener" href="https://dev.to/keevcodes/pure-functions-in-react-2o7n">Pure Functions in React - DEV</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.logrocket.com/react-pure-components-functional/">Pure functional components in React - LogRocket</a></li>
<li><a target="_blank" rel="noopener" href="https://betterprogramming.pub/react-class-vs-functional-components-2327c7324bdd">React Class vs. Functional Components - Medium</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/41985547/why-reactjs-components-must-act-like-pure-functions">Why ReactJS components must act like pure functions?</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/metadata/">PREV</a></div><div class="copyright"><p>Â© 2021 - 2024 <a href="https://simonecheng.github.io">Simone Cheng</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/achjqz/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@10.3.1/dist/mermaid.min.js?v=undefined"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}
</script><script>const tocTitleElement = document.querySelector('.toc-title');
const tocContentElement = document.querySelector('.toc-content');
if (tocTitleElement) {
  tocTitleElement.addEventListener('click', (e) => {
    const isActive = tocContentElement.classList.contains('active') || tocTitleElement.classList.contains('active');
    if (isActive) {
      tocContentElement.classList.remove('active');
      tocTitleElement.classList.remove('active');
    } else {
      tocContentElement.classList.add('active');
      tocTitleElement.classList.add('active');
    }
  });
}</script></body></html>