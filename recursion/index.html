<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Recursion 遞迴 · 寫字練習</title><meta name="description" content="Recursion 遞迴 - Simone Cheng"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/dovefavicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://simonecheng.github.io/atom.xml" title="寫字練習"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="寫字練習" type="application/atom+xml">
</head><body><div class="wrap"><header><a class="logo-link" href="/"><img src="/dovefavicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="/tags/" target="_self">TAGS</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives/" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="/about/" target="_self">ABOUT</a></li><li class="nav-list-item"><a class="nav-list-link" href="/atom.xml" target="_self">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Recursion 遞迴</h1><div class="post-info">Aug 14, 2023<a class="tag-title" href="/tags/Data-Structure/">#Data Structure</a></div><div class="post-content"><h1>🐳 遞迴的種類</h1>
<p>如果一個 function 裡面有 self-calling 的敘述，便稱為遞迴，遞迴概略可以分為三個種類，分別是：</p>
<ul>
<li>Direct Recursion</li>
<li>Indirect Recursion</li>
<li>Tail Recursion</li>
</ul>
<p>下面舉一些簡單的例子來說明這三個遞迴。</p>
<span id="more"></span>
<h4 id="🦀-Direct-Recursion">🦀 Direct Recursion</h4>
<p>Direct Recursion，直接遞迴，應該蠻好理解的。如果某個 function 在 function 內部呼叫自己，就可以稱為直接遞迴。可以參考下面的 psuedo code：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">directRecursionFunction</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// some code...</span></span><br><span class="line"></span><br><span class="line">  directRecursionFunction();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// some code...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="🦀-Indirect-Recursion">🦀 Indirect Recursion</h4>
<p>Indirect Recursion，間接遞迴，意思是指多個 module 之間，彼此互相呼叫，形成 calling cycle。例如：假設目前有三個 function：<code>module A</code>、<code>module B</code>、<code>module C</code>，這三個 function 彼此互相呼叫，便會形成間接遞迴，如下圖：</p>
<pre class="mermaid">flowchart LR
  A[module A] --> B[module B]
  B --> C[module C]
  C --> A</pre>
<div class="info">
<p>像上面那種 function 互相 call 來 call 去，互相高度依賴的狀況（高耦合），盡量不要在實際開發中寫出來，會很可怕。</p>
</div>
<h4 id="🦀-Tail-Recursion">🦀 Tail Recursion</h4>
<p>Tail Recursion，尾端遞迴，其實是直接遞迴的一種，只是在 recursion 之後，下一個可執行的敘述就是 END 敘述。會特別把這個種類分出來是因為這種遞迴可以在 compiler 裡面做到最佳化。（最佳化的意思，某種程度上可以理解成「將遞迴改成非遞迴」）</p>
<h1>🐳 Recursion v.s. Iteration(Non-recusrion)</h1>
<ul>
<li>任何問題的解法必定可以用兩種演算法去解決：遞迴與非遞迴。</li>
<li>遞迴與非遞迴演算法兩者可以互相轉換
<ul>
<li>遞迴改為非遞迴，有標準 SOP</li>
<li>非遞迴改回遞迴，沒有標準 SOP（需要靈感）</li>
</ul>
</li>
</ul>
<h4 id="示意圖">示意圖</h4>
<pre class="mermaid">graph TB
  A -. 要修改的話有SOP .-> C
  C -. 必存在,但沒有SOP .-> A
  A[Recurstive Algo] --> B[Problem]
  C[Non-recursive Algo] --> B[Problem]</pre>
<h4 id="比較表">比較表</h4>
<table>
<thead>
<tr>
<th></th>
<th>遞迴</th>
<th>非遞迴</th>
</tr>
</thead>
<tbody>
<tr>
<td>程式碼</td>
<td>較精簡</td>
<td>較冗長</td>
</tr>
<tr>
<td>區域變數、暫存變數</td>
<td>使用很少或是沒有</td>
<td>使用量多</td>
</tr>
<tr>
<td>表達問題的能力</td>
<td>powerful</td>
<td>weak</td>
</tr>
<tr>
<td>除錯</td>
<td>困難</td>
<td>容易</td>
</tr>
<tr>
<td>程式執行時間</td>
<td>較久，比較沒有效率</td>
<td>較短，較有效率</td>
</tr>
<tr>
<td>memory stack 空間</td>
<td>需要額外的 stack 空間支持，所以執行時需要較多的動態空間</td>
<td>無需 stack support</td>
</tr>
</tbody>
</table>
<h1>🐳 題目練習</h1>
<h4 id="🦀-Factorial-N-階乘">🦀 Factorial N! 階乘</h4>
<h4 id="Question-1-Write-an-Interative-function-Fac-N-or-pseudo-code-for-N">Question 1: Write an Interative function Fac(N) or pseudo code for N!</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fac</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++&gt;) &#123;</span><br><span class="line">    result = result * i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Question-2-Write-a-Recursive-function-Fac-N-or-pseudo-code-for-N">Question 2: Write a Recursive function Fac(N) or pseudo code for N!</h4>
<p>先把階乘的遞迴數學定義寫出來：</p>
<p>$$<br>
n! =<br>
\begin{cases}<br>
1,\ if\ n \ne 0 \\<br>
(n-1)! * n,\ if\  n &gt; 0<br>
\end{cases}<br>
$$</p>
<p>然後再寫出遞迴的程式碼：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fac</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fac</span>(n-<span class="number">1</span>) * n;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="success">
<p>解遞迴相關問題的訣竅：先想出遞迴的數學定義，再把數學定義轉換成程式碼！</p>
</div>
<h4 id="🦀-Fibonacci-Number">🦀 Fibonacci Number</h4>
<h4 id="Definition">Definition</h4>
<p>$$<br>
\begin{cases}<br>
F_{0} = 0 \\<br>
F_{1} = 1 \\<br>
F_{n} = F_{n-1} + F_{n-2},\ for\ n \ge 2<br>
\end{cases}<br>
$$</p>
<h4 id="Question-1-Write-a-Recurisive-function-for-Fib-N">Question 1: Write a Recurisive function for Fib(N)</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fib</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fib</span>(n-<span class="number">1</span>) + <span class="title function_">fib</span>(n-<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Quesiton-2-Write-a-Interative-function-for-Fib-N">Quesiton 2: Write a Interative function for Fib(N)</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fib</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> c;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">      c = a + b;</span><br><span class="line">      a = b;</span><br><span class="line">      b = c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="🦀-Greatest-Common-Divisor-GCD-最大公因數">🦀 Greatest Common Divisor (GCD) 最大公因數</h4>
<h4 id="Definition-2">Definition</h4>
<p>用輾轉相除法來計算兩個數字（A, B）的最大公因數，定義如下：</p>
<p>$$<br>
\begin{cases}<br>
B,\ if\ (A\mod B) = 0 \\<br>
GCD(B,\ A\mod B),\ otherwise<br>
\end{cases}<br>
$$</p>
<h4 id="Write-the-recursive-code-for-GCD-A-B">Write the recursive code for GCD(A, B)</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">gcd</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a % b === <span class="number">0</span>) <span class="keyword">return</span> b;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">gcd</span>(b, a % b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="🦀-Tower-of-Hanoi-河內塔">🦀 Tower of Hanoi 河內塔</h4>
<h4 id="題目敘述">題目敘述</h4>
<p>有三個柱子，假設分別叫做 A、B、C，其中 A 柱子上有 n 個大小不同的盤子，這些盤子從上到下按照大小排放，最上面的盤子最小，最下面的盤子最大，現在要把這些盤子從 A 柱子移到 C 柱子，但必須遵守以下規則：</p>
<ol>
<li>每次只能移動一個盤子</li>
<li>大的盤子不能放在小的盤子上面</li>
</ol>
<p>請把所有的移動步驟都 print 出來。</p>
<h4 id="解題思路">解題思路</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">       A            B           C</span><br><span class="line"></span><br><span class="line">       │            │           │</span><br><span class="line">       │            │           │</span><br><span class="line">       │            │           │</span><br><span class="line">1    ┌─┼─┐          │           │</span><br><span class="line">2   ┌┼┼┼┼┼┐         │           │</span><br><span class="line">3  ┌┼┼┼┼┼┼┼┐        │           │</span><br><span class="line">  ─┴───────┴─   ────┴────   ────┴────</span><br></pre></td></tr></table></figure>
<p>先從例子開始想，假設目前有 A、B、C 三個柱子，然後有 3 個盤子在 A 柱子上面，則步驟如下：</p>
<ol>
<li>move disk 1 from A to C</li>
<li>move disk 2 from A to B</li>
<li>move disk 1 from C to B</li>
<li>move disk 3 from A to C</li>
<li>move disk 1 from B to A</li>
<li>move disk 2 from B to C</li>
<li>move disk 1 from A to C</li>
</ol>
<p>把步驟分成三個區塊來看：</p>
<ol>
<li>第 1. ~ 3. 步驟是把 1 ~ 2 號的盤子都先從 A 柱子移到 B 柱子</li>
<li>第 4. 步驟是把最後一個第 3 號盤子直接從 A 柱子移到 C 柱子</li>
<li>接下來是把 B 柱子上的盤子都移到 C 柱子</li>
</ol>
<p>例外情況：如果只有一個盤子的話，就直接從 A 柱子搬到 C 柱子就可以了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hanoi</span>(<span class="params">n, <span class="keyword">from</span>, to, via</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`move disk 1 from <span class="subst">$&#123;<span class="keyword">from</span>&#125;</span> to <span class="subst">$&#123;to&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">hanoi</span>(n - <span class="number">1</span>, <span class="keyword">from</span>, via, to); <span class="comment">// 先把 n - 1 個盤子都移到中間的柱子</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`move disk <span class="subst">$&#123;n&#125;</span> from <span class="subst">$&#123;<span class="keyword">from</span>&#125;</span> to <span class="subst">$&#123;to&#125;</span>`</span>); <span class="comment">// 把最下面的盤子移到目標柱子</span></span><br><span class="line">    <span class="title function_">hanoi</span>(n - <span class="number">1</span>, via, to, <span class="keyword">from</span>); <span class="comment">// 再把剩下的 n - 1 個盤子移到目標柱子</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="河內塔的遞迴定義">河內塔的遞迴定義</h4>
<p>把上面提到的步驟用數學式來表示，T(n) 表示移動 n 個盤子時程式所需的執行次數，如果解出 T(n) 就表示解出了這個 function 的時間複雜度：</p>
<p>$$<br>
\begin{equation*}<br>
\begin{split}<br>
T(n) &amp;= T(n - 1) + 1 + T(n - 1),\ 且\ T(1) = 1\\<br>
&amp;= 2T(n - 1) + 1<br>
\end{split}<br>
\end{equation*}<br>
$$</p>
<p>解 T(n)，用展開代入法：</p>
<p>$$<br>
\begin{equation*}<br>
\begin{split}<br>
T(n) &amp;= 2 * T(n - 1) + 1\\<br>
&amp;= 2 * [2 * T(n - 2) + 1] + 1\\<br>
&amp;= 4 * T(n - 2) + 3\\<br>
&amp;= 4 * [2 * T(n - 3) + 1] + 3\\<br>
&amp;= 8 * T(n - 3) + 7\\<br>
&amp;= 16 * T(n - 4) + 15\\<br>
&amp;= 2^{n-1} * T(n - (n - 1)) + (2^{n-1} - 1)\\<br>
&amp;= 2^{n-1} * T(1) + (2^{n-1} - 1)\\<br>
&amp;= 2^{n-1} + (2^{n-1} - 1)\\<br>
&amp;= 2^n - 1 \approx O(2^n)<br>
\end{split}<br>
\end{equation*}<br>
$$</p>
</div></article></div></main><footer><div class="paginator"><a class="next" href="/writing-a-good-pull-request/">NEXT</a></div><div class="copyright"><p>© 2021 - 2023 <a href="https://simonecheng.github.io">Simone Cheng</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/achjqz/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@10.3.1/dist/mermaid.min.js?v=undefined"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}
</script></body></html>